# Core - Others 其他

## Promise

一般的 API 是基于 callback 的，当然现在 v3 版本支持绝大多数 API 的 promise。也可以用 `async` 和 `await` 来简化代码。

```ts
// 回调方式。错误处理依赖于 chrome.runtime.lastError
chrome.tabs.create({...}, (result) => {
  if (chrome.runtime.lastError) {
    // Handle last error
  }
});

// promise 方式
chrome.tabs.create({...})
.then((result) => {
  // success case
})
.catch((error) => {
  // failure case
});

// async/await 方式
let tab = await chrome.tabs.create({
  url: 'https://example.com',
  index: tab[0].index + 1,
});
if (!tab) return;
```

## 关于跨域隔离 COOP & COEP
https://developer.chrome.com/docs/extensions/mv3/cross-origin-isolation/
https://web.dev/i18n/zh/coop-coep/

